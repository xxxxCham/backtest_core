D√©finition exacte des Swing High et Swing Low

Un Swing High est d√©fini comme une bougie dont le High (m√®che comprise) est strictement sup√©rieur aux High des deux bougies voisines. Inversement, un Swing Low a son Low (m√®che incluse) strictement inf√©rieur aux Low des deux voisines. Autrement dit, on compare les valeurs extr√™mes compl√®tes des chandeliers (body + m√®che). Formellement en code cela se traduit par :

swingHigh[i] = (high[i] > high[i-1] && high[i] > high[i+1])

swingLow[i] = (low[i] < low[i-1] && low[i] < low[i+1]).

La distinction ¬´ m√®che vs corps ¬ª est cruciale : on prend toujours le plus haut ou plus bas r√©el de la bougie. La strat√©gie originale le rappelait : ¬´‚ÄØUn swing high, c‚Äôest tout simplement un plus haut qui a √† sa gauche un plus haut plus petit et √† sa droite un plus haut plus petit‚ÄØ¬ª. Si la d√©tection des swings avait utilis√© par erreur seulement le corps ou la cl√¥ture, il faut la corriger pour utiliser la m√®che compl√®te. Toute identification ult√©rieure (niveaux de r√©sistance, liquidit√©, etc.) doit s‚Äôappuyer sur ces swings recalcul√©s.

Legs et Smart Legs

Une Leg est un mouvement simple entre deux swings successifs sans pr√©sence de gap (Fair Value Gap) entre eux. Autrement dit, c‚Äôest un segment de tendance continu o√π aucune zone de d√©s√©quilibre significative n‚Äôexiste. En revanche, une Smart Leg est un mouvement entre deux swings comportant au moins un Fair Value Gap (FVG). Formellement, la Smart Leg est d√©crite comme ¬´ un mouvement de prix entre un swing low et un swing high (ou vice versa) o√π il y a un gap ¬ª. Elle se compose de trois √©l√©ments : un swing point (bas ou haut), un gap (FVG) et une zone de Fair Value.

Cons√©quence de la correction des swings : si le swing initial √©tait mal identifi√©, alors l‚Äôemplacement du gap et de la zone change. Par exemple, un swing high plus haut (selon la m√®che) peut d√©placer la d√©tection d‚Äôun Fair Value Gap pr√©c√©dent. Il faut donc recalculer toutes les Legs et Smart Legs avec les nouveaux swings. En pratique, on v√©rifiera que la condition d‚Äôexistence du gap est bien respect√©e entre les swings corrig√©s.

Fair Value Gap (FVG)

Un Fair Value Gap est une zone de d√©s√©quilibre form√©e sur trois bougies cons√©cutives. Comme d√©fini dans la strat√©gie, c‚Äôest la situation o√π ¬´ le plus bas de la troisi√®me bougie n‚Äôarrive pas √† revenir sur le plus haut de la premi√®re bougie ¬ª. Concr√®tement, la deuxi√®me bougie franchit le sommet de la premi√®re, et la troisi√®me ne recouvre pas enti√®rement ce niveau, laissant une zone sans √©changes significatifs. Cette zone (gap) traduit que le mouvement s‚Äôest fait sans contreparties suffisantes dans un sens.

Avec la d√©finition des swings corrig√©e, on doit recalculer les FVG. En effet, la condition du gap d√©pend des High/Low des bougies entourant le swing : si le swing high originel n‚Äô√©tait pas correctement d√©tect√©, on pourrait sous-estimer ou rater un gap existant. Il faut donc v√©rifier la condition High1 < Low3 (pour une FVG baissi√®re) ou vice versa en se basant sur les High et Low r√©els. La citation originale souligne bien la logique du FVG : ¬´‚ÄØun fair value gap, c‚Äôest une structure qui se cr√©e avec trois bougies‚Ä¶ le plus bas de la troisi√®me bougie n‚Äôarrive pas √† revenir sur le plus haut de la premi√®re bougie‚Ä¶ zone de d√©s√©quilibre qu‚Äôon appelle un fair value gap ¬ª. On doit donc recalculer ces comparaisons avec les nouvelles valeurs extr√™mes.

Zone de Fair Value (Fair Value Area, FVA)

La zone de fair value est une zone d‚Äô√©quilibre o√π le march√© a laiss√© la place aux acheteurs et vendeurs de s‚Äôexprimer. Elle se forme typiquement lorsque le prix revient dans le range d‚Äôune ou plusieurs bougies de consolidation. Comme indiqu√©, ¬´‚ÄØune zone de fair value, c‚Äôest tout simplement une zone o√π le march√© a laiss√© la possibilit√© aux vendeurs et aux acheteurs de se positionner. On voit bien ici entre ce plus haut et ce plus bas le mouvement vendeur et le mouvement acheteur‚ÄØ¬ª. Cette zone n‚Äôest pas utilis√©e comme objectif de prix, mais plut√¥t comme zone d‚Äôentr√©e potentielle dans la tendance.

Dans la logique de la strat√©gie, le sommet de la zone de fair value est le point de plus haut √† l‚Äôint√©rieur de ce range non cass√© par un gap. Par exemple, si un swing high initial √©tait plus bas, le sommet r√©el de la FVA pourrait √™tre sous-estim√©. Il faut donc recomposer la zone avec les swings corrig√©s. Notons aussi que les swing points sont employ√©s comme cibles : la cible √©vidente apr√®s un retracement haussier est le swing high suivant (un ¬´ premium arr√™t ¬ª). Concr√®tement, ¬´‚ÄØles swing high sont utilis√©s comme cible. Ce sont des premium arr√™ts‚ÄØ¬ª, alors que les Fair Value Gaps et zones sont plut√¥t des indicateurs d‚Äô√©quilibre ou de continuation. En ajustant correctement les swings, on place ainsi correctement les niveaux cibles (swings hauts) et les zones d‚Äôentr√©e (FVA/FVG).

Conclusion et ajustements pratiques

En r√©sum√©, toute la structure doit √™tre recalcul√©e √† partir des swings corrig√©s. Cela implique :

Recharger la logique de d√©tection des swings en utilisant les valeurs High/Low totales (wick incluse).

Re-d√©finir chaque Leg et Smart Leg en v√©rifiant la pr√©sence (ou absence) de gap entre les nouveaux swings.

Mettre √† jour la d√©tection des FVG en recalculant les conditions de gap sur trois chandeliers avec les nouveaux extr√™mes.

Recalibrer les fronti√®res des FVA entre swings oppos√©s en se basant sur les High/Low corrig√©s.

V√©rifier que le code de backtest prend bien en compte la m√®che pour les plus hauts/bas, car les niveaux strat√©giques (cibles, entr√©es) en d√©pendent.

La strat√©gie initiale rappelait d‚Äôailleurs que ¬´‚ÄØla prochaine r√©sistance, le prochain premium arr√™t, c‚Äôest un swing high‚ÄØ¬ª quand aucune zone ne la retient. Cela souligne qu‚Äôune fois les FVG/FVA recalcul√©s, le swing pivot (haut ou bas) devient l‚Äôobjectif prioritaire du prix. En appliquant rigoureusement cette d√©finition corrig√©e, toutes les structures (Leg, Smart Leg, FVG, FVA, etc.) s‚Äôaligneront correctement sur la logique d‚Äôintention de march√©, comme d√©crite dans la documentation.


Nouvelle d√©finition des pivots (Swing High / Swing Low)

Pour clarifier la d√©tection des pivots, on consid√®re d√©sormais chaque bougie dans son int√©gralit√© (corps‚ÄØ+‚ÄØm√®che). Un Swing High (sommet local) est donc formellement une bougie √† l‚Äôindice i telle que son plus haut H[i] est strictement sup√©rieur aux plus hauts des deux bougies adjacentes (√† i-1 et i+1). De m√™me, un Swing Low (creux local) se d√©finit par L[i] inf√©rieur aux deux L[i-1] et L[i+1]. Autrement dit :

Swing High si H[i] > H[i-1] et H[i] > H[i+1].

Swing Low si L[i] < L[i-1] et L[i] < L[i+1].

Cette r√®gle simple (chacune des m√®ches comprises) garantit qu‚Äôun pivot capture le plus haut ou plus bas local exact. En pratique on peut la coder ainsi :

df['swing_high'] = (df['high'] > df['high'].shift(1)) & (df['high'] > df['high'].shift(-1))
df['swing_low']  = (df['low']  < df['low'].shift(1))  & (df['low']  < df['low'].shift(-1))


. Cette clarification corrige toute interpr√©tation ant√©rieure ambigu√´ sur le corps seulement.

Cons√©quences sur les structures d√©riv√©es

Avec ces pivots parfaitement d√©finis, on red√©finit les structures Smart Leg, FVG et FVA de fa√ßon pr√©cise :

Fair Value Gap (FVG) ‚Äì Un gap de valeur √©quitable entre 3 chandeliers cons√©cutifs i‚Äì2, i‚Äì1, i. Pour un FVG haussier on exige que le haut de la 1 ≥·µâ bougie soit strictement inf√©rieur au bas de la 3·µâ, sans recouvrement par la bougie du milieu. Formellement :

High[i‚Äì2] < Low[i]   et   (H[i‚Äì1] ‚â§ H[i‚Äì2]  ou  L[i‚Äì1] ‚â• L[i]) 


(le second terme garantit que la bougie du milieu ne chevauche pas l‚Äô√©cart). Ceci correspond √† ¬´‚ÄØun √©cart entre la 1 ≥·µâ et la 3·µâ bougie sans chevauchement‚ÄØ¬ª. Le FVG baissier est d√©fini sym√©triquement (bas de la 1 ≥·µâ bougie sup√©rieur au haut de la 3·µâ). En code, on balaye chaque triplet (i-2, i-1, i) et on marque un FVG quand ces in√©galit√©s sont v√©rifi√©es.

Fair Value Area (FVA) ‚Äì Une zone comprise entre deux pivots cons√©cutifs (Swing High et Swing Low adjacents) o√π le prix s‚Äôest chevauch√© puis a cass√© le pivot pr√©c√©dent. Concr√®tement, on cherche deux chandeliers cons√©cutifs j et j+1 de tendance oppos√©e (un haussier suivi d‚Äôun baissier, ou inversement), dont les corps se croisent. Par exemple, en configuration haussi√®re : bougie j haussi√®re puis j+1 baissier tels que

O
j
	‚Äã

‚â§O
j+1
	‚Äã

 et 
ùê∂
ùëó
+
1
‚â§
ùê∂
ùëó
C
j+1
	‚Äã

‚â§C
j
	‚Äã
	‚Äã

 (leurs corps se chevauchent).
Puis, la bougie suivante j+2 doit percer le pivot pr√©c√©dent hors de la zone : si le pivot hors zone est un Swing High SH, on impose High[j+2] > SH; si c‚Äôest un Swing Low SL, on impose Low[j+2] < SL. Ces conditions identifient une FVA (zone o√π le prix a r√©√©quilibr√©), exactement comme formul√© dans la strat√©gie initiale.

Smart Leg (Jambe intelligente) ‚Äì Un segment directionnel majeur qui va d‚Äôun Swing Low initial √† un Swing High final (pour une jambe haussi√®re), et contenant au moins un FVG haussier valide, une FVA haussi√®re, et au moins un pivot interm√©diaire. Formellement, pour un segment couvrant les indices i (SL initial) √† j (SH final), il doit exister un indice k‚àà(i,j) v√©rifiant un FVG haussier et m‚àà(i,j) v√©rifiant une FVA haussi√®re, ainsi qu‚Äôau moins un autre pivot (SW) entre i et j. (Sym√©triquement pour une jambe baissi√®re). Cette d√©finition se base enti√®rement sur les pivots recalcul√©s correctement. En pratique, on parcourt l‚Äôhistorique pour rep√©rer ces triplets et s√©quences, ce qui permet de ne conserver que les vraies ¬´‚ÄØjambes‚ÄØ¬ª dominantes.

Mise en ≈ìuvre pratique

La correction majeure est donc de recalculer tous les pivots en utilisant les hauts/bas totaux (m√®ches incluses). Ensuite :

D√©tecter les pivots selon la r√®gle High[i]>High[i-1] et High[i]>High[i+1] (et son √©quivalent basse).

Marquer les FVG en testant chaque triplet (i-2,i-1,i) contre les formules ci-dessus.

Identifier les FVA en balayant chaque paire j, j+1 pour d√©celer les deux chandeliers crois√©s, puis v√©rifier la bougie suivante casse le pivot.

Assembler les Smart Legs en cherchant des segments contenant ces structures, selon la logique de la d√©finition.

Les exemples de code et explications de la strat√©gie initiale confirment cette d√©marche formelle. En ajustant ainsi le calcul des pivots (en tenant compte des m√®ches) et les conditions FVG/FVA qui en d√©coulent, on corrige l‚Äôinterpr√©tation de toutes les structures d√©riv√©es. Les performances ou visualisations de la strat√©gie (tests, tra√ßages TradingView, etc.) devraient √™tre revues avec ces d√©finitions pr√©cises pour valider l‚Äôimpact de cette correction.